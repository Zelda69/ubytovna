{define title}Rezervace seznam{/define}
{define description}Description{/define}
{block content}


<table class="default">
    <thead>
    <tr>
        <th>Datum rezervace</th>
        <th>Období</th>
        <th>Kdo</th>
        <th>Pokoj</th>
        <th>Cena</th>
        <th>Stav</th>
        <th>&nbsp;</th>
    </tr>
    </thead>
    <tbody>

    {foreach $reservations as $reservation}
        {if $reservation->reservation->date_from > date('Y-m-j')}
            {var $stav = 'Před příjezdem'}
        {elseif $reservation->reservation->date_from >= date('Y-m-j') && $reservation->reservation->date_to > date('Y-m-j')}
            {var $stav = 'Probíhající'}
        {else}
            {var $stav = 'Ukončená'}
        {/if}

        <tr>
            <td>{$reservation->reservation->last_change|date:'H:i j. n. Y'}</td>
            <td>{$reservation->reservation->date_from|date:'j. n. Y'} - {$reservation->reservation->date_to|date:'j. n. Y'}</td>
            <td>{$reservation->reservation->guests->name}</td>
            <td><a n:href=":Front:Room:detail $reservation->room->id">{$reservation->room->name}</a></td>
            <td>{$reservation->room->price * date_diff($reservation->reservation->date_from, $reservation->reservation->date_to)->format('%d')|number} Kč</td>
            <td>{$stav}</td>
            <td></td>
        </tr>
        {if !is_null($reservation->reservation->note) && $reservation->reservation->note !== ''}
            <tr>
                <td colspan="7" style="text-align: center; font-size: 0.8em;">Poznámka {$reservation->reservation->note}</td>
            </tr>
        {/if}
    {/foreach}

    {if $reservations->count() == 0}
        <tr><td colspan="7" style="text-align: center;">Nenalezeny žádné rezervace.</td></tr>
    {/if}

    </tbody>
</table>